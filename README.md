# HentaiChan Parser
**HentaiChan Parser** – это кроссплатформенный скрипт для получения данных с сайта [HentaiChan](https://hentaichan.live) в формате JSON. Он позволяет записать всю информацию о конкретной манге, а также её главах и содержании глав.

## Порядок установки и использования
1. Установить Python версии не старше 3.9. При установке рекомендуется добавить в PATH.
2. В среду исполнения установить следующие пакеты вручную или при помощи файла _requirements.txt_: webdriver-manager, BeautifulSoup4, PyEnchant, Selenium, lxml.
```
pip install webdriver-manager
pip install BeautifulSoup4
pip install PyEnchant
pip install Selenium
pip install lxml
```
3. Настроить скрипт путём редактирования _Settings.json_.
4. Установить браузер [Google Chrome](https://www.google.com.iq/chrome/) в стандартную директорию на Windows, либо использовать _*.deb_ пакет на Linux.
5. Открыть директорию со скриптом в терминале. Можно использовать метод `cd` и прописать путь к папке, либо запустить терминал из проводника.
6. Ввести нужную команду и дождаться завершения.

# Консольные команды
```
hcp.py parce [MANGA_SLUG]
```
Проводит парсинг тайтла с указанным алиасом в JSON формат и загружает его обложки. В случае, если файл тайтла уже существует, дополнит его новыми данными. 

**Список специфических флагов:**
* _**-f**_ – включает перезапись уже загруженных обложек и существующих JSON файлов.
____
```
hcp.py -s
```
Флаг _**-s**_ выключает компьютер после завершения работы скрипта. Его можно добавить к любой другой команде.

# Settings.json
```JSON
"format": "dmp-v1"
```
Задаёт внутреннюю структуру описательных файлов тайтлов. Поддерживаются следующие форматы: [DMP-V1](Examples/DMP-V1.md), [HTMP-V1](Examples/HTMP-V1.md).
___
```JSON
"sizing-images": false
```
Определяет, нужно ли подсчитывать и записывать в JSON разрешение обложки и слайдов в пикселях.
___
```JSON
"use-id-instead-slug": false
```
При включении данного параметра файлы JSON и директория обложек тайтла будут названы по ID произведения (коим считается ID первой главы тайтла), а не по алиасу.
___
```JSON
"auto-branches-merging": false
```
Определяет режим распределения глав по ветвям. Если параметр отключен, то каждая ветвь будет соответствовать переводчику; при включении же оного в первую ветвь будут помещены все доступные главы, номера которых не дублируются, а дублирующиеся главы распределятся по другим ветвям согласно их переводчикам.
___
```JSON
"covers-directory": ""
```
Указывает, куда сохранять обложки тайтлов. При пустом значении будет создана папка _Covers_ в исполняемой директории скрипта. Рекомендуется оформлять в соответствии с принципами путей в Linux, описанными [здесь](http://cs.mipt.ru/advanced_python/lessons/lab02.html#cd).
___
```JSON
"titles-directory": ""
```
Указывает, куда сохранять JSON-файлы тайтлов. При пустом значении будет создана папка Titles в исполняемой директории скрипта. Рекомендуется оформлять в соответствии с принципами путей в Linux, описанными [здесь](http://cs.mipt.ru/advanced_python/lessons/lab02.html#cd).
___
```JSON
"retry-tries": 3
```
Указывает, сколко раз проводить повторные попытки при ошибке загрузки страницы.
___
```JSON
"retry-delay": 15
```
Указывает, через какой промежуток времени (в секундах) провести повторную попытку при ошибке загрузки страницы.
___
```JSON
"debug": false
```
Переключает отображение окна браузера во время выполнения запросов через [Selenium](https://github.com/SeleniumHQ/selenium).

_Copyright © DUB1401. 2022-2023._
